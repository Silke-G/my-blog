<%- include("partials/header.ejs") %>

<div class="container">
    <h1 class="page-title text-center" style="color: white;">
        <%= typeof post !== 'undefined' ? 'Edit Post' : 'New Blog Post' %>
    </h1>

    <form action="<%= typeof post !== 'undefined' ? '/update/' + post.slug : '/create' %>" method="POST" class="mx-auto" style="max-width: 900px;">

        <div class="mb-3">
            <label for="title" class="form-label">Blog Title</label>
            <input type="text" class="form-control" id="title" name="title" placeholder="Blog Title" value="<%= typeof post !== 'undefined' ? post.title : '' %>" required>
        </div>

        <div class="mb-3">
            <label for="author" class="form-label">Author</label>
            <input type="text" class="form-control" id="author" name="author" placeholder="Author" value="<%= typeof post !== 'undefined' ? post.author : '' %>" required>
        </div>

        <div class="mb-3">
            <label for="postDate" class="form-label">Date</label>
            <input type="text" class="form-control" id="postDate" name="date" value="<%= typeof post !== 'undefined' ? post.date : new Date().toLocaleDateString() %>" readonly>
        </div>

        <div class="mb-5">
            <label for="content" class="form-label">Content</label>
            <textarea class="form-control" id="content" name="content" placeholder="Content" rows="10" required><%= typeof post !== 'undefined' ? post.content : '' %></textarea>
        </div>

        <button type="submit" class="btn btn-primary mb-4">
            <%= typeof post !== 'undefined' ? 'Update' : 'Publish' %>
        </button>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const dateInput = document.getElementById('postDate');
    const today = new Date();
    const formattedDate = today.toLocaleDateString();
    dateInput.value = formattedDate;
</script>

<%- include("partials/footer.ejs") %>



